#!/usr/bin/env php
<?php

/**
 * Command like Metatag writer for video files.
 */

define('__ROOT_DIRECTORY__', dirname(realpath($_SERVER['SCRIPT_FILENAME']), 2));
use Symfony\Component\Process\Process;

define('__CONFIG_LIB__', __ROOT_DIRECTORY__.'/config');

require __ROOT_DIRECTORY__.'/bootstrap.php';

$composerDir = [
    '/home/bjorn/.config/composer',
    '/home/bjorn/scripts/Dumpserver',
    '/home/bjorn/scripts/Mediatag',
    '/home/bjorn/scripts/server_scripts',
    '/home/bjorn/scripts/utm',
    '/home/bjorn/scripts/UtmTemplate',
    '/home/bjorn/www/cwp_www',
    '/home/bjorn/www/plex_web',
];

foreach ($composerDir as $directory) {
    echo \PHP_EOL.'Updating composer in '.$directory.\PHP_EOL;
    $process = new Process(['composer', 'update']);
    $process->setTty(true);

    $process->setWorkingDirectory($directory);
    $process->run();
}
